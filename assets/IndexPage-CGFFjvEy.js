import{Q as c}from"./QPage-CZqcUPmy.js";import{d as _,o as l,U as u,V as p,W as g,a2 as m}from"./index-B4HfQMAO.js";import"./render-CPD2BLiS.js";let r=null;function y(){const s=document.createElement("div");s.style.height="1in",s.style.width="1in",s.style.top="-100%",s.style.left="-100%",s.style.position="absolute",document.body.appendChild(s);const t=s.offsetHeight;return document.body.removeChild(s),t}async function f(){let s=document.getElementById("background-canvas");if(!s||s.classList.contains("active"))return;s.classList.add("active");const t=window.getComputedStyle(document.body).getPropertyValue("--q-primary"),e=window.getComputedStyle(document.body).getPropertyValue("--q-primary"),n={node:s,mainColor:t,primaryColor:e,backgroundColor:"rgba(0,0,0,0)"};r?r.setConfigs(n):r=new M(n),r.start()}function w(s){return s*(180/Math.PI)}class i{constructor(t,e){this.x=typeof t=="number"?t:0,this.y=typeof e=="number"?e:0}addVector(t){if(!(t instanceof i))throw new TypeError;this.x+=t.x,this.y+=t.y}mulVector(t){if(!(t instanceof i))throw new TypeError;return this.x*t.x+this.y*t.y}mul(t){return new i(this.x*t,this.y*t)}rotate(t){let e=Math.cos(t),o=Math.sin(t),n=this.x*e-this.y*o,d=this.x*o+this.y*e;this.x=n,this.y=d}getDistance(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}getLength(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}getAngle(t){let e=Math.acos(this.x/this.getLength());return console.log(t),w(e)}}class h{constructor(){this._coords=new i}get x(){return this._coords.x}get y(){return this._coords.y}getDistance(t){if(!(t instanceof h))throw new TypeError;return this._coords.getDistance(t._coords)}move(){}}class x extends h{colors=["#f44","#4f4","#4ff"];constructor(){super(),this._coords=new i(Math.random()*window.innerWidth,Math.random()*window.innerHeight),this._direction=new i(Math.random(),Math.random()),this._direction=new i(0,1),this._speed=3,this._speed=Math.random()+1,this._size=4+3/this._speed,this._color="#00bcc2",this._color=this.colors[Math.floor(Math.random()*this.colors.length)],this._neighboors=[],this._need_resize=!0}get angle(){return this._speed.getAngle()}get size(){return this._size}get color(){return this._color}move(){this._direction.rotate((Math.random()-.5)*.05),this._coords.addVector(this._direction.mul(this._speed)),this._coords.x<0?this._coords.x=window.innerWidth-this._coords.x*-1:this._coords.x>window.innerWidth&&(this._coords.x-=window.innerWidth),this._coords.y<0?this._coords.y=window.innerHeight-this._coords.y*-1:this._coords.y>window.innerHeight&&(this._coords.y-=window.innerHeight)}}class b extends h{constructor(t){super(),this._node=t,this._coords.x=window.innerWidth/2,this._coords.y=window.innerHeight/2,this._isDisplayed=!1,this._eventsNodes=[document.body,this._node],document.body.addEventListener("mousemove",this._onMove.bind(this)),document.body.addEventListener("touchmove",this._onMove.bind(this)),document.body.addEventListener("touchend",this._transiteMouse.bind(this)),document.body.addEventListener("mouseover",this._transiteMouse.bind(this)),document.body.addEventListener("mouseout",this._transiteMouse.bind(this)),document.body.addEventListener("hover",this._transiteMouse.bind(this))}test(t){if(console.log(t.type),!!this._eventsNodes.includes(t.target))for(let e of t.targetTouches)this._coords.x=e.pageX,this._coords.y=e.pageY}_onMove(t){if(this._eventsNodes.includes(t.target))switch(t.type){case"mousemove":this._coords.x=t.offsetX,this._coords.y=t.offsetY;break;case"touchmove":this._isDisplayed=!0;for(let e of t.targetTouches)this._coords.x=e.pageX,this._coords.y=e.pageY;break}}_transiteMouse(t){if(this._eventsNodes.includes(t.target))switch(t.type){case"mouseover":this._isDisplayed=!0;break;case"mouseout":this._isDisplayed=!1;break;default:this._isDisplayed=!1}}}class M{constructor(t){this.setConfigs(t),this.ctx=this._node.getContext("2d"),this._resize(),this._isWork=!1,this._distances=[],this._max_distance=150,this._fps=60,this._mousePoint=new b(this._node),this._setStyles(),window.addEventListener("resize",()=>this._need_resize=!0)}setConfigs(t){this._mainColor=t.mainColor,this._primaryColor=t.primaryColor,this._node=t.node}_resize(){this._node.width=0,this._node.height=0,this._node.width=this._node.parentNode.parentElement.clientWidth,this._node.height=this._node.parentNode.parentElement.clientHeight,this._scale=window.devicePixelRatio,this._points=[];const t=this._node.width*this._node.height;let e=Math.round(Math.sqrt(t)/5);e>1e3&&(e=1e3),console.log(`Background resize! DPI: ${y()} count points: ${e}`),this._createPoints(e),this._need_resize=!1}_setStyles(){}_draw_line(t,e,o,n,d,a){this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(o,n),this.ctx.lineWidth=d,this.ctx.strokeStyle=a,this.ctx.stroke()}_draw(){if(!this._node.isConnected)return this.stop();this._need_resize&&this._resize(),this.ctx.clearRect(0,0,this._node.width,this._node.height),this._computeNeighboors();for(let t of this._distances){if(t.length>this._max_distance)continue;let e=500/Math.pow(t.length,2);e>this._scale&&(e=this._scale),e<.1&&(e=.1),this._draw_line(t.point.x,t.point.y,t.anotherPoint.x,t.anotherPoint.y,e,this._primaryColor)}for(let t of this._points)t.getDistance(this._mousePoint)<this._max_distance&&this._mousePoint._isDisplayed&&this._draw_line(t.x,t.y,this._mousePoint.x,this._mousePoint.y,this._scale,this._mainColor)}_computeNeighboors(){this._distances=[];for(let t=0;t<this._points.length;t++)for(let e=t+1;e<this._points.length;e++){let o=this._points[t].getDistance(this._points[e]);this._distances.push({point:this._points[t],anotherPoint:this._points[e],length:o})}}_createPoints(t){for(let e=0;e<t;e++)this._points.push(new x(0,0))}async start(){for(this._isWork&&console.warn("Background already started!!!"),this._isWork=!0;this._isWork;){for(let t of this._points)t.move();this._draw(),await new Promise(t=>setTimeout(t,1e3/this._fps))}}stop(){this._isWork||console.warn("Background not running!!!"),this._isWork=!1,r=null,console.log("Background stopped!!!")}}const v=_({__name:"IndexPage",setup(s){return l(f),(t,e)=>(u(),p(c,{class:"full-width"},{default:g(()=>e[0]||(e[0]=[m("canvas",{id:"background-canvas",class:"full-width"},null,-1)])),_:1}))}});export{v as default};
